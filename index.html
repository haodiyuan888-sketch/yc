<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¾é£Ÿè®°</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<audio id="bgMusic" src="assets/bg_music/èŠ’ç§.mp3" loop></audio>

<div id="music-overlay">
    <div id="overlay-message">ç‚¹å‡»å±å¹•ä»»æ„ä½ç½®å¼€å§‹ï¼</div>
</div>

<div class="page-container" id="main-page">
    <h1>ğŸ’¯è½¬ä»€ä¹ˆåƒä»€ä¹ˆğŸ¥¢</h1>
    <p>
        æ‚¨æƒ³å†³å®šåƒå“ªä¸€é¤å‘¢ï¼
    </p>

    <div class="directional-btns">
        <button class="btn" id="btn-breakfast" onclick="startSpin('æ—©é¥­ ğŸš')">
            â˜€ï¸ æ—©é¥­
        </button>
        <button class="btn" id="btn-lunch" onclick="startSpin('åˆé¥­ ğŸœ')">
            ğŸ½ï¸ åˆé¥­
        </button>
        <button class="btn" id="btn-dinner" onclick="startSpin('æ™šé¥­ ğŸ²')">
            ğŸŒ™ æ™šé¥­
        </button>
    </div>

    <div id="wheel-container">
        <div id="wheel">
            <div id="spin-placeholder"></div>
        </div>
        <div id="wheel-pointer"></div>
    </div>

    <button class="btn" id="reset-btn" onclick="resetWheel()">å¤ä½</button>

</div>

<div id="result-modal">
    <div class="modal-content">
        <h2 id="modal-title"></h2>
        <p id="modal-message"></p>
        <button class="btn" onclick="closeModalAndEnableButtons()">å†æ¥ä¸€æ¬¡ï¼</button>
    </div>
</div>

<script>
    const music = document.getElementById('bgMusic');
    const overlay = document.getElementById('music-overlay');
    const wheel = document.getElementById('wheel');
    const modal = document.getElementById('result-modal');
    const modalTitle = document.getElementById('modal-title');
    const modalMessage = document.getElementById('modal-message');
    const directionalBtns = document.querySelectorAll('.directional-btns .btn');

    // *** éŸ³ä¹æ’­æ”¾é€»è¾‘ (ä¸å˜) ***
    overlay.addEventListener('click', () => {
        music.play().then(() => {
            overlay.style.opacity = '0';
            setTimeout(() => {
                overlay.style.display = 'none';
            }, 500);
        }).catch(error => {
            console.error("éŸ³ä¹æ’­æ”¾å¤±è´¥:", error);
            overlay.style.display = 'none';
        });
    }, { once: true });

    /* æŠ½å¥–è½¬ç›˜é€»è¾‘ï¼š100ä¸ªæ‰‡åŒºï¼Œä¸‰å¤§ç±»ï¼Œä¸­å›½èœä¸ºä¸» */
    // å¥–å“æ•°æ®ä¿æŒ 100 ä¸ªä¸å˜
    const prizes = [
        // --- æ—©é¤ (B) 33 ç§é€‰é¡¹ (ç²¥/èœ/ç‚¹å¿ƒä¸ºä¸») ---
        { type: "æ—©é¥­ ğŸš", name: "çš®è›‹ç˜¦è‚‰ç²¥", message: "ç»å…¸å¹¿å¼ç²¥å“ï¼Œæš–èƒƒé¦–é€‰ï¼" },
        { type: "æ—©é¥­ ğŸš", name: "å°ç±³å—ç“œç²¥", message: "å…»ç”Ÿåˆç”œèœœï¼Œå¥åº·å¼€å§‹ï¼" },
        { type: "æ—©é¥­ ğŸš", name: "è™¾é¥º/çƒ§å–", message: "ç²¾è‡´å¹¿å¼ç‚¹å¿ƒï¼Œç¾ç¾å“’ï¼" },
        { type: "æ—©é¥­ ğŸš", name: "é¸¡è›‹çŒé¥¼", message: "è¡—è¾¹å°åƒç‹è€…ï¼Œé¦™è„†å¯å£ï¼" },
        { type: "æ—©é¥­ ğŸš", name: "å’¸è±†è…è„‘", message: "åœ°é“åŒ—æ–¹é£å‘³ï¼ŒåŠ ç‚¹è¾£æ¤’ï¼" },
        { type: "æ—©é¥­ ğŸš", name: "ç…é¥¼æœå­", message: "å¤©æ´¥ç‰¹è‰²ï¼Œå·ä¸€åˆ‡ï¼" },
        { type: "æ—©é¥­ ğŸš", name: "çº¢æ£é“¶è€³ç²¥", message: "æ¶¦ç‡¥å…»é¢œï¼Œå¼€å¯å…ƒæ°”ï¼" },
        { type: "æ—©é¥­ ğŸš", name: "èœåŒ…/è‚‰åŒ…", message: "çƒ­æ°”è…¾è…¾çš„å¤§åŒ…å­ï¼" },
        { type: "æ—©é¥­ ğŸš", name: "è‘±æ²¹æ‹Œé¢ (å°ä»½)", message: "ç®€æ˜“å°èœï¼Œè‘±é¦™å››æº¢ï¼" },
        { type: "æ—©é¥­ ğŸš", name: "è‚ ç²‰ (é²œè™¾/ç‰›è‚‰)", message: "ä¸æ»‘ç»†è…»ï¼Œå¹¿å¼æ—©ç‚¹ï¼" },
        { type: "æ—©é¥­ ğŸš", name: "ç´«ç±³ç²¥", message: "å¥åº·ç²—ç²®ï¼Œé¥±è…¹æ„Ÿå¼ºï¼" },
        { type: "æ—©é¥­ ğŸš", name: "ç™½ç²¥é…æ¦¨èœ/è…ä¹³", message: "æ¸…æ·¡å…»èƒƒï¼Œæç®€ä¸»ä¹‰ï¼" },
        { type: "æ—©é¥­ ğŸš", name: "æ²¹æ¡é…è±†æµ†", message: "æ°¸æ’çš„ç»å…¸æ­é…ï¼" },
        { type: "æ—©é¥­ ğŸš", name: "é”…è´´ (ç”Ÿç…)", message: "å¤–ç„¦é‡Œå«©ï¼Œå°å¿ƒçƒ«å˜´ï¼" },
        { type: "æ—©é¥­ ğŸš", name: "é…¸è¾£åœŸè±†ä¸", message: "æ¸…çˆ½å°èœï¼Œå¼€èƒƒæç¥ï¼" },
        { type: "æ—©é¥­ ğŸš", name: "è‚‰æ¾ç²¥", message: "å’¸é¦™è½¯ç³¯ï¼Œå„¿ç«¥æœ€çˆ±ï¼" },
        { type: "æ—©é¥­ ğŸš", name: "ç™½ç¼æ—¶è”¬", message: "æ¸…æ·¡å¥åº·ï¼Œè†³é£Ÿçº¤ç»´ï¼" },
        { type: "æ—©é¥­ ğŸš", name: "èƒ¡è¾£æ±¤ (æ²³å—)", message: "ä¸­åŸç‰¹è‰²ï¼Œéº»è¾£æš–èƒƒï¼" },
        { type: "æ—©é¥­ ğŸš", name: "èŒ¶å¶è›‹", message: "å…¥å‘³é†‡åšï¼Œä¾¿åˆ©ä¹‹é€‰ï¼" },
        { type: "æ—©é¥­ ğŸš", name: "æ²¹èŒ¶ (è¥¿å®‰)", message: "é¦™æµ“åšæœï¼Œåœ°æ–¹å°åƒï¼" },
        { type: "æ—©é¥­ ğŸš", name: "å°ç¬¼åŒ…", message: "æ±¤æ±é²œç¾ï¼Œè¦æ…¢ç‚¹åƒï¼" },
        { type: "æ—©é¥­ ğŸš", name: "çªçªå¤´", message: "ç²—ç²®å¥åº·ï¼Œæ€€æ—§ç¾å‘³ï¼" },
        { type: "æ—©é¥­ ğŸš", name: "é¸¡è›‹é†ªç³Ÿ (ç”œå“)", message: "ç”œé…’æš–èƒƒï¼Œç”œèœœå¼€å§‹ï¼" },
        { type: "æ—©é¥­ ğŸš", name: "èœè‚‰é¦„é¥¨ (å°ä»½)", message: "çš®è–„é¦…å¤§ï¼Œæ±¤é²œå‘³ç¾ï¼" },
        { type: "æ—©é¥­ ğŸš", name: "ç»¿è±†ç²¥", message: "æ¸…å‡‰è§£æš‘ï¼Œå¤å­£ä¼˜é€‰ï¼" },
        { type: "æ—©é¥­ ğŸš", name: "æ°´æ™¶è™¾é¥º", message: "æ™¶è¹å‰”é€ï¼Œå…¥å£Qå¼¹ï¼" },
        { type: "æ—©é¥­ ğŸš", name: "è’¸ç‰ç±³/çº¢è–¯", message: "å¤©ç„¶ç”œå‘³ï¼Œå¥åº·æœ´ç´ ï¼" },
        { type: "æ—©é¥­ ğŸš", name: "å’¸é¸­è›‹", message: "ä¸‹ç²¥ç¥å™¨ï¼Œæ²¹æ²™æµå¿ƒï¼" },
        { type: "æ—©é¥­ ğŸš", name: "é¸¡ä¸ç²¥", message: "è¥å…»ä¸°å¯Œï¼Œå£æ„Ÿé¡ºæ»‘ï¼" },
        { type: "æ—©é¥­ ğŸš", name: "éº»å›¢/ç…å †", message: "å¤–é…¥é‡Œç³¯ï¼Œé¦™ç”œå¯å£ï¼" },
        { type: "æ—©é¥­ ğŸš", name: "è‚‰å¤¹é¦ (å°ä»½)", message: "é¦é¦™è‚‰çƒ‚ï¼Œè¥¿å®‰ç‰¹è‰²ï¼" },
        { type: "æ—©é¥­ ğŸš", name: "é±¼ç‰‡ç²¥", message: "æµ·é²œæ¸…æ·¡ï¼Œé²œå‘³åè¶³ï¼" },
        { type: "æ—©é¥­ ğŸš", name: "è‘±æ²¹é¥¼", message: "å¤–é…¥é‡Œè½¯ï¼Œè‘±é¦™æ‰‘é¼»ï¼" },

        // --- åˆé¤ (L) 34 ç§é€‰é¡¹ (ç±³/é¢/ç²‰ä¸ºä¸») ---
        { type: "åˆé¥­ ğŸœ", name: "çº¢çƒ§ç‰›è‚‰é¢", message: "æµ“æ±¤åšè‚‰ï¼Œå¤§å£æ»¡è¶³ï¼" },
        { type: "åˆé¥­ ğŸœ", name: "å…°å·æ‹‰é¢", message: "æ¸…æ±¤èåœï¼ŒåŠ²é“é¢æ¡ï¼" },
        { type: "åˆé¥­ ğŸœ", name: "é±¼é¦™è‚‰ä¸ç›–é¥­", message: "å›½æ°‘ä¸‹é¥­èœï¼Œé…¸ç”œå¯å£ï¼" },
        { type: "åˆé¥­ ğŸœ", name: "é…¸èœé±¼ç±³é¥­", message: "éº»è¾£é²œé¦™ï¼Œè¶…çº§ä¸‹é¥­ï¼" },
        { type: "åˆé¥­ ğŸœ", name: "å¤è‚‰é¥­ (å°å¼)", message: "é¦™æµ“å…¥å‘³ï¼Œä¸€å£å›åˆ°ç«¥å¹´ï¼" },
        { type: "åˆé¥­ ğŸœ", name: "é¸¡å…¬ç…²ç±³é¥­", message: "éº»è¾£å¹²é”…ï¼Œè¶Šåƒè¶Šé¦™ï¼" },
        { type: "åˆé¥­ ğŸœ", name: "é‡åº†å°é¢", message: "éº»è¾£é²œé¦™ï¼ŒèˆŒå°–ä¸Šçš„åˆºæ¿€ï¼" },
        { type: "åˆé¥­ ğŸœ", name: "æ‹…æ‹…é¢", message: "å·å‘³ç»å…¸ï¼Œé¦™è¾£é…±æ±ï¼" },
        { type: "åˆé¥­ ğŸœ", name: "è¿‡æ¡¥ç±³çº¿", message: "äº‘å—ç‰¹è‰²ï¼Œå¤§ç¢—çƒ­æ±¤ï¼" },
        { type: "åˆé¥­ ğŸœ", name: "è™¾ä»ç‚’é¢", message: "é”…æ°”åè¶³ï¼Œé¢æ¡Qå¼¹ï¼" },
        { type: "åˆé¥­ ğŸœ", name: "æ‰¬å·ç‚’é¥­", message: "ç²’ç²’åˆ†æ˜ï¼Œé‡‘ç‰æ»¡å ‚ï¼" },
        { type: "åˆé¥­ ğŸœ", name: "ç‚’ç±³ç²‰ (æ±Ÿè¥¿/å¹¿ä¸œ)", message: "å¹²é¦™æœ‰åš¼åŠ²ï¼Œåœ°æ–¹ç¾é£Ÿï¼" },
        { type: "åˆé¥­ ğŸœ", name: "ç ‚é”…ç±³çº¿", message: "æ¸©æš–æ»‹è¡¥ï¼Œæ–™è¶³å‘³ç¾ï¼" },
        { type: "åˆé¥­ ğŸœ", name: "å®«ä¿é¸¡ä¸ç›–é¥­", message: "ç”œè¾£å£å‘³ï¼Œæ°¸è¿œçš„ç¥ï¼" },
        { type: "åˆé¥­ ğŸœ", name: "æ–°ç–†å¤§ç›˜é¸¡æ‹Œé¢", message: "è±ªè¿ˆç¾å‘³ï¼Œåˆ†é‡åè¶³ï¼" },
        { type: "åˆé¥­ ğŸœ", name: "ç‚¸é…±é¢ (è€åŒ—äº¬)", message: "æµ“éƒé…±æ–™ï¼Œé¢æ¡åŠ²é“ï¼" },
        { type: "åˆé¥­ ğŸœ", name: "é…¸è¾£ç²‰ (çº¢è–¯ç²‰)", message: "é…¸è¾£åˆºæ¿€ï¼ŒåŠ²é“çˆ½å£ï¼" },
        { type: "åˆé¥­ ğŸœ", name: "æ­¦æ±‰çƒ­å¹²é¢", message: "èŠéº»é…±æµ“éƒï¼Œæ¹–åŒ—ç‰¹è‰²ï¼" },
        { type: "åˆé¥­ ğŸœ", name: "ç‚’æ²³ç²‰ (å¹²ç‚’ç‰›æ²³)", message: "ç²¤å¼ç»å…¸ï¼Œé•¬æ°”åè¶³ï¼" },
        { type: "åˆé¥­ ğŸœ", name: "æ’éª¨é¥­/è’¸é¥­", message: "è½¯ç³¯æ’éª¨ï¼Œç±³é¥­å…¥å‘³ï¼" },
        { type: "åˆé¥­ ğŸœ", name: "é¦„é¥¨é¢", message: "é¢æ¡é¦„é¥¨åŒé‡äº«å—ï¼" },
        { type: "åˆé¥­ ğŸœ", name: "æµ·é²œç‚’é¥­", message: "æµ·å‘³åè¶³ï¼Œé²œé¦™ç¾å‘³ï¼" },
        { type: "åˆé¥­ ğŸœ", name: "åˆ€å‰Šé¢ (å±±è¥¿)", message: "é¢èº«åšå®ï¼Œå£æ„Ÿç‹¬ç‰¹ï¼" },
        { type: "åˆé¥­ ğŸœ", name: "éº»è¾£æ‹Œé¢", message: "ç®€å•ç²—æš´ï¼Œéº»è¾£å¼€èƒƒï¼" },
        { type: "åˆé¥­ ğŸœ", name: "å’–å–±é¸¡é¥­", message: "é¦™æµ“å’–å–±ï¼Œä¸œå—äºšé£å‘³ï¼" },
        { type: "åˆé¥­ ğŸœ", name: "äº‘åé¢", message: "å¹¿å¼æ¸…æ±¤ï¼Œé²œè™¾äº‘åï¼" },
        { type: "åˆé¥­ ğŸœ", name: "è¥¿çº¢æŸ¿é¸¡è›‹é¢", message: "å®¶å¸¸æ¸©æš–ï¼Œæ¸…çˆ½ä¸è…»ï¼" },
        { type: "åˆé¥­ ğŸœ", name: "æ¢…èœæ‰£è‚‰é¥­", message: "å’¸é¦™è½¯çƒ‚ï¼Œè‚¥è€Œä¸è…»ï¼" },
        { type: "åˆé¥­ ğŸœ", name: "è‘±æ²¹æ‹Œé¢ (ä¸»é£Ÿ)", message: "å¤§ä»½é¢æ¡ï¼Œè‘±é¦™æµ“éƒï¼" },
        { type: "åˆé¥­ ğŸœ", name: "ç‚’å¹´ç³•", message: "è½¯ç³¯å¹´ç³•ï¼Œæ­é…è‚‰ä¸é’èœï¼" },
        { type: "åˆé¥­ ğŸœ", name: "è—¤æ¤’é¸¡ç±³é¥­", message: "è—¤æ¤’éº»é¦™ï¼Œæ¸…æ–°ä¸è…»ï¼" },
        { type: "åˆé¥­ ğŸœ", name: "é…¸è¾£ç±³ç²‰", message: "é…¸è¾£å¤Ÿå‘³ï¼Œå—¦ç²‰åœä¸ä¸‹æ¥ï¼" },
        { type: "åˆé¥­ ğŸœ", name: "çƒ©é¢ (æ²³å—)", message: "ç¾Šè‚‰æ±¤é²œï¼Œé¢ç‰‡åŠ²é“ï¼" },
        { type: "åˆé¥­ ğŸœ", name: "éº»è¾£é¦™é”…é…ç±³é¥­", message: "å¹²é¦™éº»è¾£ï¼Œè‡ªç”±ç»„åˆï¼" },

        // --- æ™šé¤ (D) 33 ç§é€‰é¡¹ (ç²¥/èœä¸ºä¸») ---
        { type: "æ™šé¥­ ğŸ²", name: "æ¸…ç‚’æ—¶è”¬ (ä¸‰é“)", message: "å¥åº·æ¸…æ·¡ï¼Œè†³é£Ÿå‡è¡¡ï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "çº¢çƒ§è‚‰", message: "è‚¥è€Œä¸è…»ï¼Œç±³é¥­æ€æ‰‹ï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "å®«ä¿é¸¡ä¸ (å®¶å¸¸èœ)", message: "é…¸ç”œé€‚ä¸­ï¼Œå¤§å¨æ°´å‡†ï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "è’œè“‰å¼€èƒŒè™¾", message: "é²œç¾æµ·å‘³ï¼Œè’œé¦™æµ“éƒï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "éº»å©†è±†è…", message: "å·å‘³ç»å…¸ï¼Œéº»è¾£é²œé¦™ï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "é±¼é¦™è‚‰ä¸ (å®¶å¸¸èœ)", message: "ä¸‹é¥­èœä¸­çš„å¸¸é’æ ‘ï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "ä¸œåŒ—å¤§ä¹±ç‚–", message: "è±ªè¿ˆä¸œåŒ—èœï¼Œè¥å…»ä¸°å¯Œï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "åœ°ä¸‰é²œ", message: "èŒ„å­åœŸè±†é’æ¤’ï¼Œå®Œç¾æ­é…ï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "æ¸…è’¸é²ˆé±¼", message: "é²œå«©åŸå‘³ï¼Œç²¤èœé£æƒ…ï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "è”¬èœç²¥ (æ™šé¤)", message: "æ¸…æ·¡ç²¥å“ï¼Œç¡å‰æ— è´Ÿæ‹…ï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "é†‹æºœç™½èœ", message: "ç®€å•å¿«æ‰‹ï¼Œé…¸è„†å¯å£ï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "ç•ªèŒ„ç‚’è›‹", message: "æœ€å®¶å¸¸çš„æ¸©æš–å‘³é“ï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "è€é¸­æ±¤/æ’éª¨æ±¤", message: "æ»‹è¡¥ç‚–æ±¤ï¼Œæš–å¿ƒæš–èƒƒï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "çˆ†ç‚’è…°èŠ±", message: "ç«çˆ†çˆ†ç‚’ï¼Œå£æ„Ÿè„†å«©ï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "å®¶å¸¸è±†è…", message: "å¤–ç„¦é‡Œå«©ï¼Œé…±é¦™æµ“éƒï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "ç™½ç¼è™¾", message: "åŸæ±åŸå‘³ï¼Œæµ·é²œæœ€ä½³ï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "é¦™è‡é¸¡è‚‰ç²¥", message: "ç®€å•ç†¬ç…®ï¼Œæ»‹å‘³æ— ç©·ï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "æ°´ç…®ç‰›è‚‰/é±¼", message: "éº»è¾£é²œé¦™ï¼Œé‡å£å‘³å¿…é€‰ï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "è’œè“‰è¥¿å…°èŠ±", message: "å¥åº·ç»¿å¶èœï¼Œæ¸…çˆ½ç¾å‘³ï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "æ¸…è’¸è‚‰é¥¼", message: "ç²¤å¼å®¶å¸¸èœï¼Œé²œå«©å¤šæ±ï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "å°ç‚’é»„ç‰›è‚‰", message: "æ¹–å—ç‰¹è‰²ï¼Œé¦™è¾£ä¸‹é¥­ï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "é…¸èœé±¼ç‰‡æ±¤", message: "é…¸çˆ½å¼€èƒƒï¼Œé±¼è‚‰é²œå«©ï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "æ¸…ç‚–ç¾Šè‚‰", message: "å†¬å­£æ»‹è¡¥ï¼Œæ±¤æµ“è‚‰çƒ‚ï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "é…±çˆ†çŒªè‚", message: "å£æ„Ÿç»†è…»ï¼Œé…±é¦™æµ“éƒï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "å†¬ç“œæ’éª¨æ±¤", message: "æ¸…æ·¡è§£è…»ï¼Œæ¶¦è‚ºé™ç‡¥ï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "å¤«å¦»è‚ºç‰‡ (å‡‰èœ)", message: "å·å‘³å‡‰èœï¼Œéº»è¾£é¦™æµ“ï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "çº¢çƒ§èŒ„å­", message: "è½¯ç³¯å…¥å‘³ï¼Œç±³é¥­æ­æ¡£ï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "æ‰¬å·ç‹®å­å¤´", message: "æ·®æ‰¬åèœï¼Œæ¸…æ·¡è½¯ç³¯ï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "æ¤’ç›æ’æ¡", message: "å¤–é…¥é‡Œå«©ï¼Œå’¸é¦™é€‚å£ï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "ä¸Šæ±¤å¨ƒå¨ƒèœ", message: "æ¸…æ·¡è¥å…»ï¼Œæ±¤æ±é²œç¾ï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "æµ·å‚å°ç±³ç²¥", message: "æ»‹è¡¥å…»é¢œï¼Œé«˜ç«¯ç²¥å“ï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "å¹²é”…èŠ±èœ", message: "å¹²é¦™éº»è¾£ï¼Œé”…æ°”åè¶³ï¼" },
        { type: "æ™šé¥­ ğŸ²", name: "è‘±çƒ§æµ·å‚", message: "é²èœç»å…¸ï¼Œå£æ„Ÿè½¯ç³¯ï¼" },
    ];

    // éªŒè¯æ€»æ•°æ˜¯å¦ä¸º 100
    console.assert(prizes.length === 100, `å¥–å“æ•°é‡åº”ä¸º 100ï¼Œå®é™…ä¸º ${prizes.length}`);

    let isSpinning = false;
    const totalSegments = prizes.length; // 100
    const anglePerSegment = 360 / totalSegments; // 3.6åº¦
    const halfSegmentAngle = anglePerSegment / 2; // 1.8åº¦
    let currentRotation = 0;

    // æ¢å¤è½¬ç›˜åˆ°åˆå§‹çŠ¶æ€
    function resetWheel() {
        if (isSpinning) return;
        wheel.style.transition = 'transform 0.5s ease-out';
        wheel.style.transform = `rotate(0deg)`;
        currentRotation = 0;
        enableButtons();
    }

    // å¯ç”¨æ‰€æœ‰æŒ‰é’®
    function enableButtons() {
        directionalBtns.forEach(btn => btn.disabled = false);
    }

    // ç¦ç”¨æ‰€æœ‰æŒ‰é’®
    function disableButtons() {
        directionalBtns.forEach(btn => btn.disabled = true);
    }

    // å…³é—­å¼¹çª—å¹¶å¯ç”¨æŒ‰é’®
    function closeModalAndEnableButtons() {
        modal.style.display = 'none';
        enableButtons();
    }

    // åŠ¨æ€ç”Ÿæˆ100ä¸ªæ‰‡åŒºæ–‡æœ¬ (åœ¨ CSS ä¸­å·²éšè—)
    function createWheelSegments() {
        prizes.forEach((prize, index) => {
            const segment = document.createElement('div');
            segment.classList.add('wheel-segment');
            segment.textContent = `${prize.type}: ${prize.name}`;

            const rotationAngle = (index * anglePerSegment + halfSegmentAngle) + 90;
            segment.style.transform = `rotate(${rotationAngle}deg)`;
            wheel.appendChild(segment);
        });
    }
    createWheelSegments();

    /**
     * å¼€å§‹æŠ½å¥–ï¼Œæ ¹æ® mealType è¿›è¡Œå®šå‘æŠ½å–
     * @param {string} mealType - æŠ½å¥–ç±»å‹ ('æ—©é¥­ ğŸš', 'åˆé¥­ ğŸœ', 'æ™šé¥­ ğŸ²')
     */
    function startSpin(mealType) {
        if (isSpinning) return;
        isSpinning = true;
        disableButtons();

        // 1. è¿‡æ»¤å‡ºç›®æ ‡ç±»åˆ«çš„å¥–å“ï¼Œå¹¶è®°å½•å®ƒä»¬åœ¨æ•´ä¸ª prizes æ•°ç»„ä¸­çš„åŸå§‹ç´¢å¼•
        const filteredPrizes = prizes.map((p, index) => ({
            ...p,
            originalIndex: index
        })).filter(p => p.type === mealType);

        if (filteredPrizes.length === 0) {
            console.error("æœªæ‰¾åˆ°åŒ¹é…çš„å¥–å“ç±»åˆ«ã€‚");
            isSpinning = false;
            enableButtons();
            return;
        }

        // 2. åœ¨è¿‡æ»¤åçš„æ•°ç»„ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªç»“æœ
        const selectedFilteredIndex = Math.floor(Math.random() * filteredPrizes.length);
        const selectedPrize = filteredPrizes[selectedFilteredIndex];

        // 3. è·å–è¯¥ç»“æœåœ¨åŸå§‹ 100 ä¸ªå¥–å“æ•°ç»„ä¸­çš„ç´¢å¼•
        const actualIndex = selectedPrize.originalIndex;

        // 4. è®¡ç®—æ—‹è½¬è§’åº¦ (é€»è¾‘ä¸ä¹‹å‰ç›¸åŒï¼Œä½†åŸºäº 100 æ‰‡åŒº)
        const randomRevolutions = Math.floor(Math.random() * 5) + 5;
        const angleToAlign = 360 - (actualIndex * anglePerSegment + halfSegmentAngle);
        const targetAngle = currentRotation + (360 * randomRevolutions) + angleToAlign;

        // 5. æ‰§è¡Œæ—‹è½¬åŠ¨ç”»
        wheel.style.transition = 'transform 5s cubic-bezier(0.25, 0.1, 0.25, 1)';
        wheel.style.transform = `rotate(${targetAngle}deg)`;

        // 6. æ—‹è½¬ç»“æŸåå¼¹å‡ºç»“æœ
        setTimeout(() => {
            isSpinning = false;

            modalTitle.textContent = `ğŸ¯  ${selectedPrize.type}ï¼š${selectedPrize.name}`;
            modalMessage.textContent = `ç¾é£Ÿå»ºè®®ï¼š${selectedPrize.message}`;
            modal.style.display = 'flex';

            // æ›´æ–°è®°å½•çš„è§’åº¦
            currentRotation = targetAngle % 360;
            wheel.style.transition = 'none';
            wheel.style.transform = `rotate(${currentRotation}deg)`;

        }, 5500); // æ—‹è½¬æ—¶é—´ 5 ç§’ + 500 æ¯«ç§’ç¼“å†²
    }
</script>
</body>
</html>
